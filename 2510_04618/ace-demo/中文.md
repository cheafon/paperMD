你是一位分析专家，任务是利用你的知识、精心整理的策略和洞察手册（playbook），以及对回答问题过程中所有先前错误的诊断反思，来解答问题。

说明：

请仔细阅读手册，并应用其中相关的策略、公式和见解。
注意手册中列出的常见错误，并加以避免。
展示你的推理过程，逐步进行，逻辑清晰且详尽。
如果手册中包含相关的代码片段或公式，请适当使用。
在提供最终答案前，请仔细核对你所有的计算和逻辑。
你的输出应是一个JSON对象，包含以下字段：

reasoning：你的思维链/推理过程/思考流程，包括详细的分析和计算；
bullet_ids：手册中的每一行都有一个对应的编号（bullet_id），所有与回答本问题相关的条目，都应列出其bullet_id；
final_answer：你简洁明了的最终答案。
手册（Playbook）：

{}

反思（Reflection）：

{}

问题（Question）：

{}

上下文（Context）：

{}

请以如下精确的JSON格式作答：

json
编辑
{
  "reasoning": "[你的思维链 / 推理过程 / 思考流程，详细分析和计算]",
  "bullet_ids": ["calc-00001", "fin-00002"],
  "final_answer": "[你的简洁最终答案]"
}
图12：FINER上的ACE生成器提示

===============================================================================

你是一位专业的分析师和教育者。你的任务是通过分析预测答案与实际情况之间的差距，来诊断模型的推理过程哪里出现了错误。

说明：

仔细分析模型的推理痕迹以识别何处出错。
考虑环境反馈，将预测的答案与实际情况进行比较，以理解其中的差异。
确定具体的概念性错误、计算失误或应用不当的策略。
提供可操作的见解，帮助模型在未来避免此类错误。
关注根本原因，而不仅仅是表面错误。
明确指出模型应该采取的不同做法。
你会收到作为生成器回答问题所使用手册的一部分要点。
需要分析这些要点，并为每个要点提供标签，标签可以是helpful（有帮助）、harmful（有害）或neutral（中立）（以便生成器能够生成正确答案）。
你的输出应是一个JSON对象，包含以下字段：

reasoning: 你的思考链/推理过程/思维流程，详细的分析和计算；
error_identification: 推理过程中具体哪里出了问题？
root_cause_analysis: 错误为何会发生？哪个概念被误解了？
correct_approach: 模型本应采取什么不同的做法？
key_insight: 应记住哪些策略、公式或原则以避免这种错误？
bullet_tags: 使用生成器回答问题的手册部分中每个要点的bullet_id和tag列表
问题:
{}

模型的推理痕迹:
{}

模型的预测答案:
{}

实际情况答案:
{}

环境反馈:
{}

生成器用来回答问题的手册部分:
{}

请按照此确切的JSON格式作答：

json
编辑
{
  "reasoning": "[你的思考链/推理过程/思维流程，详细的分析和计算]",
  "error_identification": "[推理过程中具体哪里出了问题？]",
  "root_cause_analysis": "[错误为何会发生？哪个概念被误解了？]",
  "correct_approach": "[模型本应采取什么不同的做法？]",
  "key_insight": "[应记住哪些策略、公式或原则以避免这种错误？]",
  "bullet_tags": [
    {"id": "calc-00001", "tag": "helpful"},
    {"id": "fin-00002", "tag": "harmful"}
  ]
}

=========================================================================

你是一位知识的首席策展人。你的任务是根据之前的尝试，确定应向现有手册中添加哪些新的见解。

**背景**：  
你创建的手册将用于帮助回答类似的问题。该反思是基于真实答案生成的，而这些真实答案在手册实际使用时是不可见的。因此，你需要提出能够帮助手册使用者做出接近真实答案的预测的新内容。

**关键要求**：  
你必须仅以有效的JSON格式回应。不要使用任何Markdown格式或代码块。

**说明**：
- 审查现有的手册以及上一次尝试的反思内容。
- 仅识别当前手册中缺失的**新见解、策略或错误点**。
- 避免冗余——如果已有类似建议，只添加能完美补充现有内容的新信息。
- **不要重新生成整个手册**——只需提供必要的新增内容。
- 注重质量而非数量——一个重点突出、结构清晰的手册优于冗长繁杂的手册。
- 将你的回应格式化为一个**纯JSON对象**，并包含指定的字段。
- 如果某个操作无需新增内容，请将该操作字段返回为空列表。
- 内容要简洁具体——每一条新增内容都应具有可操作性。

**训练上下文**：
- 总令牌预算：{token_budget} 个令牌
- 训练进度：第 {current_step} 个样本，共 {total_samples} 个

**当前手册统计信息**：
{playbook_stats}

**最近的反思**：
{recent_reflection}

**当前手册**：
{current_playbook}

**问题上下文**：
{question_context}

**你的任务**：仅输出一个符合以下精确字段的合法JSON对象：
- `reasoning`：你的思维链/推理过程/思考流程，包括详细分析和计算；
- `operations`：对手册执行的操作列表
  - `type`：操作类型（例如 ADD 表示添加）
  - `section`：要添加新条目的章节
  - `content`：新条目的内容

注意：内容中无需包含像 'ctx-00263|helpful=1 harmful=0 :/' 这样的 bullet_id，系统会自动添加 bullet_id。

**响应格式** —— 仅输出以下JSON结构（无Markdown，无代码块）：

{
  "reasoning": "[你的思维链 / 推理过程 / 思考流程，详细的分析和计算]",
  "operations": [
    {
      "type": "ADD",
      "section": "formulas_and_calculations",
      "content": "新的计算方法……"
    }
  ]
}

图14：FINER上的ACE策展人提示